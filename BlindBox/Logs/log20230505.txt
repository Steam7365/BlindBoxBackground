2023-05-05 09:56:57.215 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 09:56:57.555 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 09:56:57.557 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 09:56:57.562 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 09:56:57.564 +08:00 [INF] Hosting environment: Development
2023-05-05 09:56:57.567 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 09:56:58.272 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 09:56:58.802 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 09:56:58.812 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 9.5612ms
2023-05-05 09:56:58.818 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 549.9139ms
2023-05-05 09:56:58.935 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 09:56:59.038 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 103.2063ms
2023-05-05 09:57:02.235 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/api/Staffs/Index - -
2023-05-05 09:57:02.244 +08:00 [INF] Executing endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 09:57:02.260 +08:00 [INF] Route matched with {action = "Index", controller = "Staffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BlindBox.Controllers.StaffsController (BlindBox).
2023-05-05 09:57:03.652 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.EF 
2023-05-05 09:57:03.690 +08:00 [INF] {Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} 获取全部的Staff数据：成功
2023-05-05 09:57:04.789 +08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffId], [s].[StaffName], [s].[StaffWages], [s].[StaffGender], [s].[StaffPhone], [s].[StaffCode], [s].[StaffEntryTime], [s].[StaffPosition], [s].[StaffState], [s].[Image], [s].[Province], [s].[City], [s].[Area], [s].[Details]
FROM [ro].[staff] AS [s]
WHERE [s].[IsDelete] = CAST(0 AS bit)
2023-05-05 09:57:04.853 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BilndBox.Dto.StaffDto, BilndBox.Dto, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-05-05 09:57:04.873 +08:00 [INF] Executed action BlindBox.Controllers.StaffsController.Index (BlindBox) in 2604.8375ms
2023-05-05 09:57:04.877 +08:00 [INF] Executed endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 09:57:04.887 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/api/Staffs/Index - - - 200 - application/json;+charset=utf-8 2652.6504ms
2023-05-05 11:15:39.567 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 11:15:39.774 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 11:15:39.776 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 11:15:39.780 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 11:15:39.782 +08:00 [INF] Hosting environment: Development
2023-05-05 11:15:39.784 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 11:15:40.624 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 11:15:41.106 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 11:15:41.122 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 14.2230ms
2023-05-05 11:15:41.122 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 501.5490ms
2023-05-05 11:15:41.243 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 11:15:41.356 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.1846ms
2023-05-05 14:25:25.996 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 14:28:21.519 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 14:28:21.815 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 14:28:21.818 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 14:28:21.825 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 14:28:21.827 +08:00 [INF] Hosting environment: Development
2023-05-05 14:28:21.829 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 14:28:22.688 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 14:28:23.065 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 14:28:23.073 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 6.4122ms
2023-05-05 14:28:23.076 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 391.2572ms
2023-05-05 14:28:23.156 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 14:28:23.257 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 101.2373ms
2023-05-05 14:28:27.366 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Staffs/UploadImage - 0
2023-05-05 14:28:27.375 +08:00 [INF] Executing endpoint 'BlindBox.Controllers.StaffsController.UploadImage (BlindBox)'
2023-05-05 14:28:27.390 +08:00 [INF] Route matched with {action = "UploadImage", controller = "Staffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadImage() on controller BlindBox.Controllers.StaffsController (BlindBox).
2023-05-05 14:28:27.807 +08:00 [INF] Executed action BlindBox.Controllers.StaffsController.UploadImage (BlindBox) in 409.6022ms
2023-05-05 14:28:27.814 +08:00 [INF] Executed endpoint 'BlindBox.Controllers.StaffsController.UploadImage (BlindBox)'
2023-05-05 14:28:27.819 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Incorrect Content-Type: 
   at Microsoft.AspNetCore.Http.Features.FormFeature.ReadForm()
   at Microsoft.AspNetCore.Http.DefaultHttpRequest.get_Form()
   at BlindBox.Controllers.StaffsController.UploadImage() in D:\文件\项目\BlindBox\BlindBox\Controllers\StaffsController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-05-05 14:28:27.890 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Staffs/UploadImage - 0 - 500 - text/plain;+charset=utf-8 524.1464ms
2023-05-05 14:53:32.536 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 14:53:32.795 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 14:53:32.797 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 14:53:32.802 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 14:53:32.804 +08:00 [INF] Hosting environment: Development
2023-05-05 14:53:32.806 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 14:53:33.528 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 14:53:33.948 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 14:53:33.960 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 10.5147ms
2023-05-05 14:53:33.964 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 439.3025ms
2023-05-05 14:53:34.050 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 14:53:34.153 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 102.6376ms
2023-05-05 14:53:37.273 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/api/Staffs/Index - -
2023-05-05 14:53:37.282 +08:00 [INF] Executing endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 14:53:37.298 +08:00 [INF] Route matched with {action = "Index", controller = "Staffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BlindBox.Controllers.StaffsController (BlindBox).
2023-05-05 14:53:38.702 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.EF 
2023-05-05 14:53:38.739 +08:00 [INF] 获取全部的Staff数据：成功
2023-05-05 14:53:39.799 +08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffId], [s].[StaffName], [s].[StaffWages], [s].[StaffGender], [s].[StaffPhone], [s].[StaffCode], [s].[StaffEntryTime], [s].[StaffPosition], [s].[StaffState], [s].[Image], [s].[Province], [s].[City], [s].[Area], [s].[Details]
FROM [ro].[staff] AS [s]
WHERE [s].[IsDelete] = CAST(0 AS bit)
2023-05-05 14:53:39.862 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BilndBox.Dto.StaffDto, BilndBox.Dto, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-05-05 14:53:39.881 +08:00 [INF] Executed action BlindBox.Controllers.StaffsController.Index (BlindBox) in 2574.6446ms
2023-05-05 14:53:39.885 +08:00 [INF] Executed endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 14:53:39.897 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/api/Staffs/Index - - - 200 - application/json;+charset=utf-8 2623.6267ms
2023-05-05 15:30:01.279 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 15:30:34.048 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 15:30:34.822 +08:00 [INF] Executed DbCommand (232ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [BlindBoxIdentityDB];
2023-05-05 15:30:34.894 +08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [BlindBoxIdentityDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-05-05 15:30:34.906 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-05-05 15:30:34.970 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-05-05 15:30:34.971 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-05-05 15:30:34.985 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-05 15:30:34.989 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-05 15:30:34.999 +08:00 [INF] Applying migration '20230505073001_InitIdentityDb'.
2023-05-05 15:30:35.031 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] bigint NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2023-05-05 15:30:35.032 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] bigint NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2023-05-05 15:30:35.034 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] bigint NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2023-05-05 15:30:35.035 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] bigint NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2023-05-05 15:30:35.037 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] bigint NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2023-05-05 15:30:35.037 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] bigint NOT NULL,
    [RoleId] bigint NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2023-05-05 15:30:35.038 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] bigint NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2023-05-05 15:30:35.041 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2023-05-05 15:30:35.042 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2023-05-05 15:30:35.043 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2023-05-05 15:30:35.407 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2023-05-05 15:30:35.407 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2023-05-05 15:30:35.408 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2023-05-05 15:30:35.408 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2023-05-05 15:30:35.410 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230505073001_InitIdentityDb', N'6.0.16');
2023-05-05 16:09:16.010 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 16:09:16.230 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 16:09:16.232 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 16:09:16.237 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 16:09:16.239 +08:00 [INF] Hosting environment: Development
2023-05-05 16:09:16.241 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 16:09:18.268 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 16:09:18.649 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 16:09:18.659 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 8.5528ms
2023-05-05 16:09:18.659 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 394.6850ms
2023-05-05 16:09:18.974 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 16:09:19.074 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 100.1499ms
2023-05-05 16:22:07.128 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 16:22:07.358 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 16:22:07.360 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 16:22:07.365 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 16:22:07.367 +08:00 [INF] Hosting environment: Development
2023-05-05 16:22:07.369 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 16:22:08.369 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 16:22:08.752 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 16:22:08.760 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 392.7180ms
2023-05-05 16:22:08.760 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 8.0894ms
2023-05-05 16:22:08.981 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 16:22:09.114 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.6041ms
2023-05-05 16:22:23.063 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/CreateRole application/json 95
2023-05-05 16:22:23.475 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:22:23.499 +08:00 [INF] Route matched with {action = "CreateRole", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateRole(BlindBox.Identity.Model.Role) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:22:24.414 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:22:25.169 +08:00 [INF] Executed DbCommand (66ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2023-05-05 16:22:25.401 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-05-05 16:22:25.471 +08:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-05-05 16:22:25.479 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox) in 1972.3853ms
2023-05-05 16:22:25.482 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:22:25.493 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/CreateRole application/json 95 - 200 0 - 2429.7089ms
2023-05-05 16:42:09.901 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 16:42:10.193 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 16:42:10.195 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 16:42:10.199 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 16:42:10.201 +08:00 [INF] Hosting environment: Development
2023-05-05 16:42:10.203 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 16:42:13.024 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 16:42:13.432 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 16:42:13.443 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 10.2956ms
2023-05-05 16:42:13.448 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 427.9356ms
2023-05-05 16:42:13.564 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 16:42:13.675 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.0355ms
2023-05-05 16:42:21.831 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/CreateRole?roleName=%E5%BC%A0%E4%B8%89 - 0
2023-05-05 16:42:21.907 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:42:21.929 +08:00 [INF] Route matched with {action = "CreateRole", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateRole(System.String) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:42:22.848 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:42:23.618 +08:00 [INF] Executed DbCommand (66ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2023-05-05 16:42:23.723 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-05-05 16:42:23.732 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox) in 1795.3455ms
2023-05-05 16:42:23.736 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:42:23.749 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/CreateRole?roleName=%E5%BC%A0%E4%B8%89 - 0 - 200 - text/plain;+charset=utf-8 1918.0346ms
2023-05-05 16:43:15.343 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 16:43:15.365 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 21.4614ms
2023-05-05 16:43:15.422 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 16:43:15.426 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 4.0012ms
2023-05-05 16:43:15.501 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 16:43:15.506 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 5.1766ms
2023-05-05 16:43:15.513 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/favicon-32x32.png - -
2023-05-05 16:43:15.523 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-05-05 16:43:15.529 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/favicon-32x32.png - - - 200 628 image/png 15.5274ms
2023-05-05 16:43:30.569 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/CreateRole?roleName=%E5%BC%A0%E4%B8%89 - 0
2023-05-05 16:43:30.572 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:43:30.577 +08:00 [INF] Route matched with {action = "CreateRole", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateRole(System.String) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:43:30.609 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:43:30.622 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2023-05-05 16:43:30.626 +08:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-05-05 16:43:30.629 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox) in 48.0576ms
2023-05-05 16:43:30.631 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:43:30.634 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/CreateRole?roleName=%E5%BC%A0%E4%B8%89 - 0 - 400 - text/plain;+charset=utf-8 65.5165ms
2023-05-05 16:43:49.292 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/CreateRole?roleName=%E7%AE%A1%E7%90%86%E5%91%98 - 0
2023-05-05 16:43:49.296 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:43:49.298 +08:00 [INF] Route matched with {action = "CreateRole", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateRole(System.String) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:43:49.307 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:43:49.314 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2023-05-05 16:43:49.454 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-05-05 16:43:49.513 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-05-05 16:43:49.516 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox) in 214.6631ms
2023-05-05 16:43:49.521 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.CreateRole (BlindBox)'
2023-05-05 16:43:49.523 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/CreateRole?roleName=%E7%AE%A1%E7%90%86%E5%91%98 - 0 - 200 - text/plain;+charset=utf-8 231.4146ms
2023-05-05 16:44:47.190 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/CreateUser application/json 145
2023-05-05 16:44:47.200 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.CreateUser (BlindBox)'
2023-05-05 16:44:47.205 +08:00 [INF] Route matched with {action = "CreateUser", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateUser(BilndBox.Dto.Identity.UserDto) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:44:47.220 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:44:47.227 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2023-05-05 16:44:47.242 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:44:47.315 +08:00 [WRN] User validation failed: InvalidUserName.
2023-05-05 16:44:47.318 +08:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2023-05-05 16:44:47.324 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.CreateUser (BlindBox) in 115.0463ms
2023-05-05 16:44:47.326 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.CreateUser (BlindBox)'
2023-05-05 16:44:47.330 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/CreateUser application/json 145 - 400 - application/json;+charset=utf-8 140.5463ms
2023-05-05 16:45:24.504 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/CreateUser application/json 145
2023-05-05 16:45:24.508 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.CreateUser (BlindBox)'
2023-05-05 16:45:24.510 +08:00 [INF] Route matched with {action = "CreateUser", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateUser(BilndBox.Dto.Identity.UserDto) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:45:24.516 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:45:24.521 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2023-05-05 16:45:24.529 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:45:24.536 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:45:24.600 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT [Id]
FROM [AspNetUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-05-05 16:45:24.621 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-05-05 16:45:24.656 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64), @__p_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2023-05-05 16:45:24.667 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-05-05 16:45:24.699 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:45:24.725 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2023-05-05 16:45:24.739 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p14='?' (DbType = Int64), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p15='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13
WHERE [Id] = @p14 AND [ConcurrencyStamp] = @p15;
SELECT @@ROWCOUNT;
2023-05-05 16:45:24.749 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-05-05 16:45:24.751 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.CreateUser (BlindBox) in 236.3495ms
2023-05-05 16:45:24.756 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.CreateUser (BlindBox)'
2023-05-05 16:45:24.759 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/CreateUser application/json 145 - 200 - text/plain;+charset=utf-8 255.3092ms
2023-05-05 16:45:55.482 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 55
2023-05-05 16:45:55.485 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:45:55.490 +08:00 [INF] Route matched with {action = "Login", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BlindBox.Identity.Model.LoginRequest, Microsoft.Extensions.Options.IOptions`1[BlindBox.Models.HelpModel.JWTOptions]) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:45:55.500 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:45:55.505 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:45:55.585 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-05-05 16:45:55.817 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-05-05 16:45:55.820 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.Login (BlindBox) in 326.1935ms
2023-05-05 16:45:55.823 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:45:55.826 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 55 - 200 - text/plain;+charset=utf-8 344.4005ms
2023-05-05 16:46:02.851 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 50
2023-05-05 16:46:02.853 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:46:02.856 +08:00 [INF] Route matched with {action = "Login", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BlindBox.Identity.Model.LoginRequest, Microsoft.Extensions.Options.IOptions`1[BlindBox.Models.HelpModel.JWTOptions]) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:46:02.860 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:46:02.866 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:46:02.870 +08:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2023-05-05 16:46:02.873 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.Login (BlindBox) in 13.3982ms
2023-05-05 16:46:02.876 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:46:02.879 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 50 - 404 - text/plain;+charset=utf-8 27.9020ms
2023-05-05 16:46:15.610 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 52
2023-05-05 16:46:15.613 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:46:15.615 +08:00 [INF] Route matched with {action = "Login", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BlindBox.Identity.Model.LoginRequest, Microsoft.Extensions.Options.IOptions`1[BlindBox.Models.HelpModel.JWTOptions]) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:46:15.619 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:46:15.624 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:46:15.631 +08:00 [WRN] Invalid password for user.
2023-05-05 16:46:15.634 +08:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-05-05 16:46:15.636 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.Login (BlindBox) in 17.8349ms
2023-05-05 16:46:15.640 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:46:15.645 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 52 - 400 - text/plain;+charset=utf-8 34.8177ms
2023-05-05 16:46:30.741 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/api/Staffs/Index - -
2023-05-05 16:46:30.744 +08:00 [INF] Executing endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 16:46:30.749 +08:00 [INF] Route matched with {action = "Index", controller = "Staffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BlindBox.Controllers.StaffsController (BlindBox).
2023-05-05 16:46:31.014 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.EF 
2023-05-05 16:46:31.045 +08:00 [INF] 获取全部的Staff数据：成功
2023-05-05 16:46:31.087 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffId], [s].[StaffName], [s].[StaffWages], [s].[StaffGender], [s].[StaffPhone], [s].[StaffCode], [s].[StaffEntryTime], [s].[StaffPosition], [s].[StaffState], [s].[Image], [s].[Province], [s].[City], [s].[Area], [s].[Details]
FROM [ro].[staff] AS [s]
WHERE [s].[IsDelete] = CAST(0 AS bit)
2023-05-05 16:46:31.097 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BilndBox.Dto.StaffDto, BilndBox.Dto, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-05-05 16:46:31.107 +08:00 [INF] Executed action BlindBox.Controllers.StaffsController.Index (BlindBox) in 354.5074ms
2023-05-05 16:46:31.113 +08:00 [INF] Executed endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 16:46:31.116 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/api/Staffs/Index - - - 200 - application/json;+charset=utf-8 374.5991ms
2023-05-05 16:47:13.727 +08:00 [INF] User profile is available. Using 'C:\Users\Voe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-05 16:47:13.965 +08:00 [INF] Now listening on: https://localhost:7178
2023-05-05 16:47:13.967 +08:00 [INF] Now listening on: http://localhost:5178
2023-05-05 16:47:13.972 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-05 16:47:13.974 +08:00 [INF] Hosting environment: Development
2023-05-05 16:47:13.976 +08:00 [INF] Content root path: D:\文件\项目\BlindBox\BlindBox\
2023-05-05 16:47:15.085 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/index.html - -
2023-05-05 16:47:15.453 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/index.html - - - 200 - text/html;charset=utf-8 370.9104ms
2023-05-05 16:47:15.465 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - -
2023-05-05 16:47:15.472 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/_framework/aspnetcore-browser-refresh.js - - - 200 11974 application/javascript;+charset=utf-8 7.1932ms
2023-05-05 16:47:15.620 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - -
2023-05-05 16:47:15.725 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 104.2889ms
2023-05-05 16:47:18.874 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/api/Staffs/Index - -
2023-05-05 16:47:18.955 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-05-05 16:47:18.963 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-05-05 16:47:18.966 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/api/Staffs/Index - - - 401 0 - 92.5085ms
2023-05-05 16:47:47.294 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 55
2023-05-05 16:47:47.301 +08:00 [INF] Executing endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:47:47.324 +08:00 [INF] Route matched with {action = "Login", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BlindBox.Identity.Model.LoginRequest, Microsoft.Extensions.Options.IOptions`1[BlindBox.Models.HelpModel.JWTOptions]) on controller Identity_WebApi.Controllers.IdentityController (BlindBox).
2023-05-05 16:47:48.227 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'IdentityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.Identity 
2023-05-05 16:47:48.981 +08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-05-05 16:47:49.202 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-05-05 16:47:49.338 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-05-05 16:47:49.348 +08:00 [INF] Executed action Identity_WebApi.Controllers.IdentityController.Login (BlindBox) in 2013.8119ms
2023-05-05 16:47:49.352 +08:00 [INF] Executed endpoint 'Identity_WebApi.Controllers.IdentityController.Login (BlindBox)'
2023-05-05 16:47:49.363 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7178/api/Identity/Login application/json 55 - 200 - text/plain;+charset=utf-8 2068.7148ms
2023-05-05 16:48:15.848 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7178/api/Staffs/Index - -
2023-05-05 16:48:15.912 +08:00 [INF] Executing endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 16:48:15.917 +08:00 [INF] Route matched with {action = "Index", controller = "Staffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BlindBox.Controllers.StaffsController (BlindBox).
2023-05-05 16:48:16.228 +08:00 [INF] Entity Framework Core 6.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.16' with options: MigrationsAssembly=BlindBox.EF 
2023-05-05 16:48:16.256 +08:00 [INF] 获取全部的Staff数据：成功
2023-05-05 16:48:16.292 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffId], [s].[StaffName], [s].[StaffWages], [s].[StaffGender], [s].[StaffPhone], [s].[StaffCode], [s].[StaffEntryTime], [s].[StaffPosition], [s].[StaffState], [s].[Image], [s].[Province], [s].[City], [s].[Area], [s].[Details]
FROM [ro].[staff] AS [s]
WHERE [s].[IsDelete] = CAST(0 AS bit)
2023-05-05 16:48:16.302 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BilndBox.Dto.StaffDto, BilndBox.Dto, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-05-05 16:48:16.315 +08:00 [INF] Executed action BlindBox.Controllers.StaffsController.Index (BlindBox) in 390.5023ms
2023-05-05 16:48:16.319 +08:00 [INF] Executed endpoint 'BlindBox.Controllers.StaffsController.Index (BlindBox)'
2023-05-05 16:48:16.324 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7178/api/Staffs/Index - - - 200 - application/json;+charset=utf-8 476.4870ms
